{"version":3,"file":"table-scroll-container.js","sources":["../../../../../../src/cdk-experimental/table-scroll-container/table-scroll-container.ts","../../../../../../src/cdk-experimental/table-scroll-container/table-scroll-container-module.ts","../../../../../../src/cdk-experimental/table-scroll-container/public-api.ts","../../../../../../src/cdk-experimental/table-scroll-container/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Directive, ElementRef, Inject, OnDestroy, OnInit, Optional} from '@angular/core';\nimport {DOCUMENT} from '@angular/common';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {_getShadowRoot} from '@angular/cdk/platform';\nimport {\n  STICKY_POSITIONING_LISTENER,\n  StickyPositioningListener,\n  StickySize,\n  StickyUpdate,\n} from '@angular/cdk/table';\n\nlet nextId = 0;\n\n/**\n * Applies styles to the host element that make its scrollbars match up with\n * the non-sticky scrollable portions of the CdkTable contained within.\n *\n * This visual effect only works in Webkit and Blink based browsers (eg Chrome,\n * Safari, Edge). Other browsers such as Firefox will gracefully degrade to\n * normal scrollbar appearance.\n * Further note: These styles have no effect when the browser is using OS-default\n * scrollbars. The easiest way to force them into custom mode is to specify width\n * and height for the scrollbar and thumb.\n */\n@Directive({\n  selector: '[cdkTableScrollContainer]',\n  host: {\n    'class': 'cdk-table-scroll-container',\n  },\n  providers: [\n    {provide: STICKY_POSITIONING_LISTENER, useExisting: CdkTableScrollContainer},\n  ],\n})\nexport class CdkTableScrollContainer implements StickyPositioningListener,\n    OnDestroy, OnInit {\n  private readonly _uniqueClassName: string;\n  private _styleRoot!: Node;\n  private _styleElement?: HTMLStyleElement;\n\n  /** The most recent sticky column size values from the CdkTable. */\n  private _startSizes: StickySize[] = [];\n  private _endSizes: StickySize[] = [];\n  private _headerSizes: StickySize[] = [];\n  private _footerSizes: StickySize[] = [];\n\n  constructor(\n      private readonly _elementRef: ElementRef<HTMLElement>,\n      @Inject(DOCUMENT) private readonly _document: Document,\n      @Optional() private readonly _directionality?: Directionality) {\n    this._uniqueClassName = `cdk-table-scroll-container-${++nextId}`;\n    _elementRef.nativeElement.classList.add(this._uniqueClassName);\n  }\n\n  ngOnInit() {\n    // Note that we need to look up the root node in ngOnInit, rather than the constructor, because\n    // Angular seems to create the element outside the shadow root and then moves it inside, if the\n    // node is inside an `ngIf` and a ShadowDom-encapsulated component.\n    this._styleRoot = _getShadowRoot(this._elementRef.nativeElement) ?? this._document.head;\n  }\n\n  ngOnDestroy(): void {\n    // TODO: Use remove() once we're off IE11.\n    if (this._styleElement?.parentNode) {\n      this._styleElement.parentNode.removeChild(this._styleElement);\n      this._styleElement = undefined;\n    }\n  }\n\n  stickyColumnsUpdated({sizes}: StickyUpdate): void {\n    this._startSizes = sizes;\n    this._updateScrollbar();\n  }\n\n  stickyEndColumnsUpdated({sizes}: StickyUpdate): void {\n    this._endSizes = sizes;\n    this._updateScrollbar();\n  }\n\n  stickyHeaderRowsUpdated({sizes}: StickyUpdate): void {\n    this._headerSizes = sizes;\n    this._updateScrollbar();\n  }\n\n  stickyFooterRowsUpdated({sizes}: StickyUpdate): void {\n    this._footerSizes = sizes;\n    this._updateScrollbar();\n  }\n\n  /**\n   * Set padding on the scrollbar track based on the sticky states from CdkTable.\n   */\n  private _updateScrollbar(): void {\n    const topMargin = computeMargin(this._headerSizes);\n    const bottomMargin = computeMargin(this._footerSizes);\n    const startMargin = computeMargin(this._startSizes);\n    const endMargin = computeMargin(this._endSizes);\n\n    if (topMargin === 0 && bottomMargin === 0 && startMargin === 0 && endMargin === 0) {\n      this._clearCss();\n      return;\n    }\n\n    const direction = this._directionality ? this._directionality.value : 'ltr';\n    const leftMargin = direction === 'rtl' ? endMargin : startMargin;\n    const rightMargin = direction === 'rtl' ? startMargin : endMargin;\n\n    this._applyCss(`${topMargin}px ${rightMargin}px ${bottomMargin}px ${leftMargin}px`);\n  }\n\n  /** Gets the stylesheet for the scrollbar styles and creates it if need be. */\n  private _getStyleSheet(): CSSStyleSheet {\n    if (!this._styleElement) {\n      this._styleElement = this._document.createElement('style');\n      this._styleRoot.appendChild(this._styleElement);\n    }\n\n    return this._styleElement.sheet as CSSStyleSheet;\n  }\n\n  /** Updates the stylesheet with the specified scrollbar style. */\n  private _applyCss(value: string) {\n    this._clearCss();\n\n    const selector = `.${this._uniqueClassName}::-webkit-scrollbar-track`;\n    this._getStyleSheet().insertRule(`${selector} {margin: ${value}}`, 0);\n  }\n\n  private _clearCss() {\n    const styleSheet = this._getStyleSheet();\n    if (styleSheet.cssRules.length > 0) {\n      styleSheet.deleteRule(0);\n    }\n  }\n}\n\nfunction computeMargin(sizes: (number|null|undefined)[]): number {\n  let margin = 0;\n  for (const size of sizes) {\n    if (size == null) {\n      break;\n    }\n    margin += size;\n  }\n  return margin;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {CdkTableScrollContainer} from './table-scroll-container';\n\n@NgModule({\n  declarations: [CdkTableScrollContainer],\n  exports: [CdkTableScrollContainer],\n})\nexport class CdkTableScrollContainerModule {}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport * from './table-scroll-container';\nexport * from './table-scroll-container-module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}